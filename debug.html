<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Sistema de Certificados</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">Debug - Sistema de Certificados</h1>
        
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Estado del Sistema</h2>
            <div id="status" class="space-y-2">
                <div>Cargando...</div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Datos Cargados</h2>
            <div id="data" class="space-y-4">
                <div>Esperando datos...</div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">Errores</h2>
            <div id="errors" class="space-y-2 text-red-600">
                <div>Sin errores hasta ahora...</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/data-service.js"></script>
    <script>
        // Debug script
        async function debugSystem() {
            const statusDiv = document.getElementById('status');
            const dataDiv = document.getElementById('data');
            const errorsDiv = document.getElementById('errors');

            try {
                statusDiv.innerHTML = '<div class="text-blue-600">Inicializando DataService...</div>';
                
                // Crear DataService
                const dataService = new DataService(false); // JSON mode
                
                statusDiv.innerHTML += '<div class="text-green-600">‚úÖ DataService creado</div>';
                
                // Probar carga de datos
                statusDiv.innerHTML += '<div class="text-blue-600">Cargando clientes...</div>';
                const clientes = await dataService.getClientes();
                
                statusDiv.innerHTML += '<div class="text-green-600">‚úÖ Clientes cargados: ' + clientes.length + '</div>';
                
                statusDiv.innerHTML += '<div class="text-blue-600">Cargando t√©cnicos...</div>';
                const tecnicos = await dataService.getTecnicos();
                
                statusDiv.innerHTML += '<div class="text-green-600">‚úÖ T√©cnicos cargados: ' + tecnicos.length + '</div>';
                
                statusDiv.innerHTML += '<div class="text-blue-600">Cargando configuraci√≥n...</div>';
                const configuracion = await dataService.getConfiguracion();
                
                statusDiv.innerHTML += '<div class="text-green-600">‚úÖ Configuraci√≥n cargada</div>';

                // Mostrar datos
                dataDiv.innerHTML = `
                    <div><strong>Clientes:</strong> ${JSON.stringify(clientes, null, 2)}</div>
                    <hr class="my-4">
                    <div><strong>T√©cnicos:</strong> ${JSON.stringify(tecnicos, null, 2)}</div>
                    <hr class="my-4">
                    <div><strong>Configuraci√≥n:</strong> ${JSON.stringify(configuracion, null, 2)}</div>
                `;

                statusDiv.innerHTML += '<div class="text-green-600 font-bold">üéâ Todo funcionando correctamente</div>';

            } catch (error) {
                console.error('Error en debug:', error);
                errorsDiv.innerHTML = `<div class="bg-red-100 p-4 rounded">
                    <strong>Error:</strong> ${error.message}<br>
                    <strong>Stack:</strong> ${error.stack}
                </div>`;
                
                statusDiv.innerHTML += '<div class="text-red-600">‚ùå Error detectado</div>';
            }
        }

        // Ejecutar debug cuando cargue la p√°gina
        document.addEventListener('DOMContentLoaded', debugSystem);
    </script>
</body>
</html>
